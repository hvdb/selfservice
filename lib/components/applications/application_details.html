<sp-notification id="statusNotification" ng-if="details.notification != null" type="details.notificationType" ><span sp-translation identifier="details.notification"></span></sp-notification>





<div ng-if="details.notificationType != 'error' && !details.showAll" >

    <table class="table table-b" >
        <thead>
        <tr>
            <th>Name</th>
            <th>Value</th>
        </tr>
        </thead>

        <tbody>
        <tr>
            <td>Applicatio name</td>
            <td>{{details.application.applicationId}}</td>
        </tr>
        <tr>
            <td>Clone Url:</td>
            <td>{{details.application.gitUrl}}</td>
        </tr>
        <tr>
            <td>Description</td>
            <td>{{details.application.applicationDescription}}</td>
        </tr>
        <tr>
            <td>Target platforms</td>
            <td>{{details.application.targetPlatforms}}</td>
        </tr>
        <tr>
            <td>TeamId</td>
            <td><a href="#/teams/{{details.application.teamId}}">{{details.application.teamId}}</a></td>
        </tr>
        </tbody>
    </table>
    <form name="mergeBranch" >
        <button id="submitMergeTest" class="btn btn-primary" ng-click="details.mergeTo('master')" sp-translation identifier="'application-config-merge-test'"></button>
        <button id="submitMergeAcc" class="btn btn-primary btn-warning" ng-click="details.mergeTo('release-a')" sp-translation identifier="'application-config-merge-acc'"></button>
        <!--<button id="submitMergePrd" class="btn btn-primary btn-danger" ng-click="details.mergeTo('release-prd')" sp-translation identifier="'application-config-merge-prd'"></button> -->
    </form>
</div>


<div ng-if="details.notificationType != 'error' && details.showAll" class="container-fluid">
    <div class="row panel panel-bordered panel-shadow-a">
    <div class="col-lg-8">

        <h1>Application details</h1>

        <table class="table table-b" >
            <thead>
            <tr>
                <th>Name</th>
                <th>Value</th>
            </tr>
            </thead>

            <tbody>
            <tr>
                <td sp-translation identifier="'application-details-name'"></td>
                <td>{{details.application.applicationId}}</td>
            </tr>
            <tr>
                <td>Clone Url:</td>
                <td>{{details.application.gitUrl}}</td>
            </tr>
            <tr>
                <td>Description</td>
                <td>{{details.application.applicationDescription}}</td>
            </tr>
            <tr>
                <td>Target platforms</td>
                <td>{{details.application.targetPlatforms}}</td>
            </tr>
            <tr>
                <td>TeamId</td>
                <td><a href="#/teams/{{details.application.teamId}}">{{details.application.teamId}}</a></td>
            </tr>
            </tbody>
        </table>

    </div>
    </div>
    <div class="row">
        <div sp-translation identifier="'update-application-targetplatorms'"></div>
        <div  ng-repeat="platform in details.platform">
            <div>
                <label>
                    <input type="checkbox" ng-model="platform['selected']">
                    {{platform['name']}}
                </label>
            </div>
        </div>

    </div>

    <div class="row panel panel-bordered panel-shadow-a">

    <form id="updateApplicationForm" name="updateApplicationForm" ng-if="details.application.notification == null"  >
        <div class="col-lg-12">
            <div sp-translation identifier="'update-application-title'"></div>

            <select name="dependencyEnv" id="dependencyEnv" ng-model="details.dependencyEnv" ng-change="details.changedEnvironment()">
                <option ng-repeat="env in details.dependencyEnvironments"  value="{{$index}}" >{{env}}</option>
            </select>
        </div>
        <br/>

        <div class="col-lg-4">
            <table class="table table-b" >
                <thead>
                <tr>
                    <th>Name</th>
                    <th>Url</th>
                    <th>Resolution</th>
                    <th>Actions</th>
                </tr>
                </thead>

                <tbody ng-repeat="dependency in details.dependencyList">
                <tr>
                    <td>{{dependency.name}}</td>
                    <td>{{dependency.url}}</td>
                    <td>{{dependency.resolution}}</td>
                    <td><a ng-click="details.removeDependency(dependency.name)">X</a></td>
                </tr>
                </tbody>
            </table>

        </div>

        <div class="row">
            <div class="col-lg-8">
                <label id="dependencyNameLabel" for="dependencyName" class="col-lg-4 legend-label" sp-translation identifier="'add-customdependency-name-label'">   <input id="dependencyName"  type="text" ng-model="details.dependencyName" ng-required="true"  /></label>
                <label id="dependencyUrlLabel" for="dependencyUrl" class="col-lg-4 legend-label" sp-translation identifier="'add-customdependency-url-label'">  <input id="dependencyUrl"  type="text" ng-model="details.dependencyUrl" ng-required="true" /></label>
                <label id="dependencyResolutionlLabel" for="dependencyResolution" class="col-lg-4 legend-label" sp-translation identifier="'add-customdependency-resolution-label'">  <input id="dependencyResolution"  type="text" ng-model="details.dependencyResolution" ng-required="true" /></label>
                <br/>
                <div id="dependency" ng-if="updateApplicationForm.hasErrorState('ng-required') && updateApplicationForm.dirty" sp-translation identifier="'validation-required'"></div>
                <br/>
                <button ng-click="details.addDependency()"   ng-disabled="updateApplicationForm.invalid" class="btn btn-primary" >Add</button>
            </div>
        </div>
        <br/>
        <br/>

        <button id="submitButton" class="btn btn-primary" type="submit"  ng-click="details.updateRepo()">Save</button>

    </form>


    </div>
</div>
